<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="application"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="com.iks.hto.karteikastensystem.simple.rcp.Application">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Perspective"
            class="com.iks.hto.karteikastensystem.simple.rcp.Perspective"
            id="com.iks.hto.karteikastensystem.simple.rcp.perspective">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="true"
            class="com.iks.hto.karteikastensystem.simple.rcp.views.KarteikastenSystemViewPart"
            id="com.iks.hto.karteikastensystem.simple.rcp.view"
            name="ExplorerView"
            restorable="true">
      </view>
      <view
            class="com.iks.hto.karteikastensystem.simple.rcp.views.DetailsViewPart"
            id="com.iks.hto.karteikastensystem.simple.rcp.detailsView"
            name="DetailsView"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="com.iks.hto.karteikastensystem.simple.rcp.handlers.NeuesKarteikastensystemHandler"
            id="com.iks.hto.karteikastensystem.simple.rcp.neuesKarteikastensystem"
            name="neues Karteikastensystem">
      </command>
      <command
            id="com.iks.hto.karteikastensystem.simple.rcp.benutzerAktion"
            name="Benutzeraktion">
         <commandParameter
               id="com.iks.hto.karteikastensystem.simple.rcp.benutzer.action"
               name="Action"
               optional="true"
               values="com.iks.hto.karteikastensystem.simple.rcp.handlers.BenutzerBearbeitenParamValues">
         </commandParameter>
      </command>
      <command
            defaultHandler="com.iks.hto.karteikastensystem.simple.rcp.handlers.NeuerKarteikastenHandler"
            id="com.iks.hto.karteikastensystem.simple.rcp.neuerKarteikasten"
            name="neuer Karteikasten">
      </command>
      <command
            defaultHandler="com.iks.hto.karteikastensystem.simple.rcp.handlers.KarteikastenLoeschenHandler"
            id="com.iks.hto.karteikastensystem.simple.rcp.karteikastenLoeschen"
            name="Kateikasten löschen">
      </command>
      <command
            defaultHandler="com.iks.hto.karteikastensystem.simple.rcp.handlers.FachOeffnenHandler"
            id="com.iks.hto.karteikastensystem.simple.rcp.fachOeffnen"
            name="Fach öffnen">
      </command>
      <command
            defaultHandler="com.iks.hto.karteikastensystem.simple.rcp.handlers.KarteHinzufuegenHandler"
            id="com.iks.hto.karteikastensystem.simple.rcp.karteHinzufuegen"
            name="Karte hinzufügen">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:neu?after=after_resource">
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.benutzerAktion"
               label="neuer Benutzer ..."
               style="push">
            <parameter
                  name="com.iks.hto.karteikastensystem.simple.rcp.benutzer.action"
                  value="neu">
            </parameter>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.iks.hto.karteikastensystem.simple.rcp.karteikastenSystemAdditions?after=additions">
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.benutzerAktion"
               label="Benutzer ändern ..."
               style="push">
            <parameter
                  name="com.iks.hto.karteikastensystem.simple.rcp.benutzer.action"
                  value="bearbeiten">
            </parameter>
         </command>
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.neuerKarteikasten"
               label="neuer Karteikasten ..."
               style="push">
         </command>
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.karteikastenLoeschen"
               label="Karteikasten löschen"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <with
                     variable="activeMenuSelection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="com.iks.hto.karteikastensystem.core.model.karteikastensystem.Karteikasten">
                        </instanceof>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.fachOeffnen"
               label="Fach öffnen"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <with
                     variable="activeMenuSelection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="com.iks.hto.karteikastensystem.core.model.karteikastensystem.Fach">
                        </instanceof>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="com.iks.hto.karteikastensystem.simple.rcp.karteHinzufuegen"
               label="Karte hinzufügen"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <with
                     variable="activeMenuSelection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="com.iks.hto.karteikastensystem.core.model.karteikastensystem.Karteikasten">
                        </instanceof>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="com.iks.hto.karteikastensystem.simple.rcp.ResourceProvider">
         <variable
               name="modelresource"
               priorityLevel="activePartId">
         </variable>
         <variable
               name="benutzer"
               priorityLevel="activePartId">
         </variable>
         <variable
               name="karteikasten"
               priorityLevel="activePartId">
         </variable>
         <variable
               name="fach"
               priorityLevel="activePartId">
         </variable>
         <variable
               name="karte"
               priorityLevel="activePartId">
         </variable>
         <variable
               name="kartenseite"
               priorityLevel="activePartId">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.iks.hto.karteikastensystem.simple.rcp.handlers.BenutzerBearbeitenHandler"
            commandId="com.iks.hto.karteikastensystem.simple.rcp.benutzerAktion">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="com.iks.hto.karteikastensystem.simple.rcp.editors.FachEditor"
            default="false"
            icon="icons/full/dtool16/save_edit.gif"
            id="com.iks.hto.karteikastensystem.simple.rcp.editor.fach"
            name="Fach Editor">
      </editor>
   </extension>

</plugin>
